---
name: xhs:optimize-post
description: 审核和优化小红书帖子 - 合规检查、质量评估、内容改进
argument-hint: --file <帖子文件路径> [--auto-fix]
allowed-tools:
  - Read
  - Write
  - Edit
  - Bash
  - AskUserQuestion
---

# 优化帖子命令

本命令对帖子进行全面审核和优化。

## 使用方式

```bash
# 交互式优化（默认）
/xhs:optimize-post --file "文案生成/小红书自媒体帖子/账号/帖子目录/content.md"

# 自动应用优化
/xhs:optimize-post --file "文案生成/小红书自媒体帖子/账号/帖子目录/content.md" --auto-fix
```

参数：
- `--file`：帖子文件路径（必需）
- `--auto-fix`：是否自动应用优化建议（可选，默认false）

## 执行流程

### 第一步：读取帖子

1. 读取指定的帖子文件
2. 识别帖子结构（标题、正文、标签）
3. 提取关键信息

### 第二步：全面审核

#### 合规性检查

- [ ] 敏感内容检查
- [ ] 违禁词汇检查
- [ ] 平台规范检查
- [ ] 知识产权检查

#### 质量评估

| 项目 | 检查项 | 满分 |
|------|--------|------|
| 标题 | 吸引力、准确性、长度、关键词、符号 | 25分 |
| 正文 | 开头、结构、emoji、排版、价值、互动 | 30分 |
| 标签 | 数量、相关性、类型搭配 | 10分 |

**总分**：100分

### 第三步：生成优化建议

根据审核结果，提供详细的优化建议：

1. **标题优化**：提供3-5个优化标题选项
2. **正文优化**：具体的修改建议
3. **标签优化**：标签调整建议
4. **排版优化**：视觉呈现建议

### 第四步：应用优化

#### 交互模式

1. 展示审核报告和优化建议
2. 逐项询问用户是否采纳
3. 根据用户反馈进行修改
4. 展示修改前后对比

#### 自动模式

1. 自动应用所有优化建议
2. 创建原文件备份
3. 保存优化版本
4. 输出修改说明

### 第五步：保存结果

- **备份**：保留原文件（添加.bak后缀）
- **优化版本**：保存修改后的内容
- **修改日志**：记录所有修改

## 输出格式

### 审核报告

```markdown
# 帖子审核报告

## 文件信息
- 文件：[路径]
- 帖子主题：[主题]
- 审核时间：[时间]

## 合规性检查

### ✅ 通过
- 无敏感内容
- 符合平台规范

### ⚠️ 需注意
- [问题]：[说明和建议]

### ❌ 发现问题
- [严重问题]：[修改建议]

## 质量评估

### 标题质量：[分数]/25分
- 吸引力：[分数]/5
- 准确性：[分数]/5
- 长度：[分数]/5
- 关键词：[分数]/5
- 符号：[分数]/5

**评价**：[总体评价]

### 正文质量：[分数]/30分
- 开头：[分数]/5
- 结构：[分数]/5
- emoji：[分数]/5
- 排版：[分数]/5
- 价值：[分数]/5
- 互动：[分数]/5

**评价**：[总体评价]

### 标签质量：[分数]/10分
- 数量：[分数]/3
- 相关性：[分数]/4
- 类型：[分数]/3

**评价**：[总体评价]

## 综合评分：[总分]/100分

**评级**：⭐⭐⭐⭐⭐ (90-100分)

## 优化建议

### 标题优化
原标题：[原标题]
建议标题：
1. [选项1] - [说明]
2. [选项2] - [说明]
3. [选项3] - [说明]

### 正文优化
1. **开头**：
   - 当前：[内容]
   - 建议：[优化内容]

2. **结构**：[具体建议]
3. **结尾**：[具体建议]
4. **排版**：[具体建议]

### 标签优化
当前：[标签列表]
建议：[优化后的标签]

## 修改选项
请选择要应用的优化：

1. 全部应用
2. 选择性应用
3. 手动修改
4. 取消

请输入选项 (1-4)：
```

### 修改日志

```markdown
# 优化修改日志

## 修改时间
[时间戳]

## 修改摘要
- 标题：已修改
- 正文：已修改
- 标签：已修改

## 详细修改

### 标题
**原**：[原标题]
**新**：[新标题]
**原因**：[说明]

### 正文
**开头**：
- 原：[内容]
- 新：[内容]

**结构**：
- [修改说明]

**结尾**：
- 原：[内容]
- 新：[内容]

### 标签
**原**：[标签]
**新**：[标签]

## 文件位置
- 原文件：[原文件].bak
- 优化版本：[原文件]
```

## 交互提示

### 审核模式选择

```
请选择优化模式：

1. 交互式 - 逐项确认优化建议
2. 自动化 - 自动应用所有优化

请输入选项 (1-2)：
```

### 选择性应用

```
以下优化建议可供选择：

[1] 标题优化 (3个选项)
[2] 开头优化
[3] 结构优化
[4] 结尾优化
[5] 排版优化
[6] 标签优化

请输入要应用的选项 (如: 1,3,5)：
```

### 标题选择

```
标题优化选项：

1. [新标题1]
   - 优化点：[说明]
   - 预期效果：[说明]

2. [新标题2]
   - 优化点：[说明]
   - 预期效果：[说明]

3. [新标题3]
   - 优化点：[说明]
   - 预期效果：[说明]

请选择 (1-3)：
```

## 注意事项

1. **备份优先**：修改前自动备份原文件
2. **用户确认**：重要修改需要用户确认
3. **保留风格**：优化不应改变原有风格
4. **质量提升**：优化目标是提升质量

## 错误处理

- 文件不存在：检查路径是否正确
- 文件格式错误：确认是markdown格式
- 备份失败：提示手动备份
- 保存失败：检查文件权限

## 下一步

优化完成后，可以：
- `/xhs:generate-images` - 生成配图
- `/xhs:publish` - 发布到平台
- 继续手动编辑完善
